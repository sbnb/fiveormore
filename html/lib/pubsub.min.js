(function(j,i){"object"===typeof exports?module.exports=i():"function"===typeof define&&define.amd?define(i):j.PubSub=i()})("object"===typeof window&&window||this,function(){function j(a){return function(){throw a;}}function i(a,b,d){try{a(b,d)}catch(c){setTimeout(j(c),0)}}function m(a,b,d){a(b,d)}function k(a,b,d,c){var e=g[b],c=c?m:i,h;if(g.hasOwnProperty(b))for(b=0,h=e.length;b<h;b++)c(e[b].func,a,d)}function n(a,b,d){return function(){var c=""+a,e=c.lastIndexOf(".");for(k(a,a,b,d);-1!==e;)c=c.substr(0,
e),e=c.lastIndexOf("."),k(a,c,b)}}function l(a,b,d,c){for(var b=n(a,b,c),a=""+a,c=g.hasOwnProperty(a),e=a.lastIndexOf(".");!c&&-1!==e;)a=a.substr(0,e),e=a.lastIndexOf("."),c=g.hasOwnProperty(a);if(!c)return!1;!0===d?b():setTimeout(b,0);return!0}var f={name:"PubSubJS",version:"1.3.4"},g={},o=-1;f.publish=function(a,b){return l(a,b,!1,f.immediateExceptions)};f.publishSync=function(a,b){return l(a,b,!0,f.immediateExceptions)};f.subscribe=function(a,b){g.hasOwnProperty(a)||(g[a]=[]);var d=""+ ++o;g[a].push({token:d,
func:b});return d};f.unsubscribe=function(a){var b="string"===typeof a,d=b?"token":"func",c=b?a:!0,e=!1,h,f;for(h in g)if(g.hasOwnProperty(h))for(f=g[h].length-1;0<=f;f--)if(g[h][f][d]===a&&(g[h].splice(f,1),e=c,b))return e;return e};return f});
